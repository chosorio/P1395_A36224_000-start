clear
clc

bits=[
97
103
110
117
125
133
141
150
159
169
179
190
202
213
226
239
253
267
282
297
313
330
348
366
385
404
425
446
468
490
514
538
562
588
614
641
669
697
726
756
787
818
850
882
915
948
982
1016
1051
1087
1122
1158
1195
1231
1268
1305
1342
1380
1417
1454
1492
1529
1567
1604
1641
1678
1714
1751
1787
1823
1858
1893
1928
1962
1996
2030
2063
2095
2127
2159
2189
2220
2249
2279
2307
2335
2363
2390
2416
2442
2467
2491
2515
2539
2562
2584
2606
2627
2647
2667
2687
2706
2724
2742
2760
2777
2794
2810
2825
2840
2855
2870
2883
2897
2910
2923
2935
2947
2959
2970
2981
2992
3002
3012
3022
3031
3040
3049
3058
3066
3074
3082
3089
3097
3104
3111
3117
3124
3130
3136
3142
3148
3154
3159
3164
3169

];
temps=[
-40
-39
-38
-37
-36
-35
-34
-33
-32
-31
-30
-29
-28
-27
-26
-25
-24
-23
-22
-21
-20
-19
-18
-17
-16
-15
-14
-13
-12
-11
-10
-9
-8
-7
-6
-5
-4
-3
-2
-1
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
];



xout=0:4095;
youtspline=interp1(bits,temps,xout,"spline");
youtnear=interp1(bits,temps,xout,"nearest","extrap");

for(i=1:length(youtspline))
  if(isnan(youtspline(i)))
    yout(i)=youtnear(i);
   else
    yout(i)=youtspline(i); 
  end
end

plot(xout,yout);

bits8=0:2^8-1;
temps8=interp1(bitshift(xout,-4),yout,bits8,"linear");
%Lookup table is degrees C * 100
templookupint16=int16(temps8*100);


fileID=fopen("ThermistorLookupTable.txt",'w');
nbytes=fprintf(fileID,'%d,',templookupint16)
fclose(fileID);
plot(bits8,temps8);